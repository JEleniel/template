{
	"$id": "https://crystultima.org/aurora/card.schema.json",
	"$schema": "http://json-schema.org/draft-07/schema#",
	"additionalProperties": false,
	"description": "JSON schema for Aurora architectural model cards",
	"properties": {
		"$schema": {
			"description": "The schema file this card adheres to",
			"type": "string"
		},
		"attributes": {
			"additionalProperties": true,
			"description": "Key-value pairs providing additional data for tooling and agents",
			"type": "object"
		},
		"audit_history": {
			"description": "A record of events (created, edited, deleted) the card has been through",
			"items": {
				"additionalProperties": false,
				"properties": {
					"event": {
						"description": "The type of change made to the card",
						"enum": ["created", "edited", "deleted"],
						"type": "string"
					},
					"timestamp": {
						"description": "ISO 8601 UTC timestamp of the change",
						"format": "date-time",
						"type": "string"
					},
					"user": {
						"description": "The user ID who made the change",
						"type": "string"
					}
				},
				"required": ["event", "user", "timestamp"],
				"type": "object"
			},
			"type": "array"
		},
		"card_subtype": {
			"description": "An optional refinement of the card_type in snake_case (e.g., 'domain' for a boundary card)",
			"pattern": "^[a-z][a-z0-9_]*$",
			"type": "string"
		},
		"card_type": {
			"description": "The architectural type represented by the card in snake_case",
			"pattern": "^[a-z][a-z0-9_]*$",
			"type": "string"
		},
		"description": {
			"description": "Details regarding the element the card represents",
			"minLength": 1,
			"type": "string"
		},
		"id": {
			"description": "A short name for the card in snake_case",
			"pattern": "^[a-z][a-z0-9_]*$",
			"type": "string"
		},
		"links": {
			"description": "Relationships between cards, always directed away from mission",
			"items": {
				"additionalProperties": false,
				"properties": {
					"relationship": {
						"description": "A verb based description of the relationship (view-dependent) in snake case",
						"minLength": 1,
						"type": "string"
					},
					"target": {
						"description": "The UUID of the destination card",
						"pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[47][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
						"type": "string"
					},
					"name": {
						"description": "The human-readable name for the link target",
						"type": "string"
					}
				},
				"required": ["relationship", "target"],
				"type": "object"
			},
			"type": "array"
		},
		"name": {
			"description": "A concise human-readable name for the card",
			"minLength": 1,
			"type": "string"
		},
		"status": {
			"description": "The status of an implementable element",
			"enum": ["proposed", "pending", "implementation", "review", "verified", "deprecated", "retired"],
			"type": "string"
		},
		"uuid": {
			"description": "UUID v4 or v7 that never changes for the life of the card",
			"type": "string"
		},
		"version": {
			"description": "Semantic version of the card (major.minor.revision)",
			"pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
			"type": "string"
		}
	},
	"required": ["$schema", "uuid", "id", "card_type", "name", "description", "version", "audit_history"],
	"title": "Aurora Card Schema",
	"type": "object",
	"version": "1.0.0"
}
